<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>AlexRhino - I Like Mysql</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/7.0.0/normalize.min.css"/>
        <link rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab|Ruda"/>
        <link rel="stylesheet" type="text/css" href="/theme/css/main.css"/>

<meta name="tags" content="devops" />
</head>
<body>
<style>.github-corner:hover .octo-arm {
    animation: octocat-wave 560ms ease-in-out
}
@keyframes octocat-wave {
    0%, 100% {
        transform: rotate(0)
    }
    20%, 60% {
        transform: rotate(-25deg)
    }
    40%, 80% {
        transform: rotate(10deg)
    }
}
@media (max-width: 500px) {
    .github-corner:hover .octo-arm {
        animation: none
    }

    .github-corner .octo-arm {
        animation: octocat-wave 560ms ease-in-out
    }
}</style><div id="container">
    <header>
        <h1><a href="/">AlexRhino</a></h1>
            <ul class="social-media">
                    <li><a href="#"><i class="fa fa-You can add links in your config file fa-lg" aria-hidden="true"></i></a></li>
                    <li><a href="#"><i class="fa fa-Another social link fa-lg" aria-hidden="true"></i></a></li>
            </ul>
        <p><em></em></p>
    </header>
    <nav>
        <ul>
                    <li><a href="/category/devops.html"> devops </a></li>
                    <li><a                         class="active" href="/category/post.html"> post </a></li>
                    <li><a href="/pages/My favorite line.html">About Me</a>
                    </li>
        </ul>
    </nav>
<main>
    <article>
        <h2>I Like Mysql</h2>
        
        <aside>
            <ul>
                <li>
                    <time datetime="2018-01-31 03:32:17+00:00">Jan 31, 2018</time>
                </li>
                <li>
                    <time datetime="2018-01-31 03:32:17+00:00">Modified
                        on Jan 31, 2018</time>
                </li>
                <li>2 min read</li>
                <li>
                    Categories:
                    <a href="/category/post.html"><em>post</em></a>
                </li>
                <li>
                    Tags:
                    <a href="/tag/devops.html"><em>#devops</em></a>
                </li>
            </ul>
        </aside>
        <p>No, no, not at all</p>
<p><strong>Daily operation command</strong></p>
<pre><code>
Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> SHOW VARIABLES LIKE 'wait_timeout';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| wait_timeout  | 28800 |
+---------------+-------+
1 row in set (0.00 sec)

mysql> SHOW VARIABLES LIKE 'connect_timeout';
+-----------------+-------+
| Variable_name   | Value |
+-----------------+-------+
| connect_timeout | 10    |
+-----------------+-------+
1 row in set (0.00 sec)

mysql> SHOW variables LIKE 'NET_read_timeout';
+------------------+-------+
| Variable_name    | Value |
+------------------+-------+
| net_read_timeout | 30    |
+------------------+-------+
1 row in set (0.01 sec)

mysql>
</code></pre><p><strong>General log cause lock, Waiting for table level lock on a MySQL
table</strong></p>
<ol class="arabic simple">
<li>Show processlist say, Too many table lock when only use select</li>
<li>RDS Recent events say general log consumes too much storage.</li>
</ol>
<pre><code>
The MySQL general and/or slow logs of the DB Instance: my-sample-rds are consuming a large amount of provisioned storage. Please refer to http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_LogAccess.Concepts.MySQL.html#USER_LogAccess.MySQL.Generallog for more details. The storage consumed by general and/or slow logs is at 10% of the provisioned storage [Total: 41.47 GB] [Components: generalLogSize:6.08 MB,generalLogSizeBackup:41.46 GB,slowLogSizeBackup:3.85 MB,binlogSize:999 B,innoDbLogSize:256.00 MB]
</code></pre><ol class="arabic simple">
<li><a class="reference external" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_LogAccess.Concepts.MySQL.html#USER_LogAccess.MySQL.Generallog">RDS
doc</a>
To completely remove the old data and reclaim the disk space, call
the appropriate procedure twice in succession.</li>
</ol>
<pre><code>
PROMPT> CALL mysql.rds_rotate_slow_log;
PROMPT> CALL mysql.rds_rotate_general_log;
</code></pre><ol class="arabic simple" start="2">
<li>Log tables us csv storage.</li>
</ol>
<pre><code>
By default, the log tables use the CSV storage engine that writes data in comma-separated values format. For users who have access to the .CSV files that contain log table data, the files are easy to import into other programs such as spreadsheets that can process CSV input.

The log tables can be altered to use the MyISAM storage engine. You cannot use ALTER TABLE to alter a log table that is in use. The log must be disabled first. No engines other than CSV or MyISAM are legal for the log tables.
</code></pre><p><strong>Remove Grant USAGE</strong></p>
<ol class="arabic simple">
<li><a class="reference external" href="https://dba.stackexchange.com/questions/13083/cant-remove-grant-usage">Drop user to remove grant
usage</a></li>
</ol>

    </article>
    <section class="post-nav">
        <div id="left-page">
            <div id="left-link">
                <div id="left-arrow"><i class="fa fa-chevron-circle-left"></i></div>
                <a href="/I-Like-Elk.html"> I Like Elk</a>
            </div>
        </div>
        <div id="right-page">
            <div id="right-link">
                <a href="/I-Like-Java.html">I Like Java </a>
                <div id="right-arrow"><i class="fa fa-chevron-circle-right"></i></div>
            </div>
        </div>
    </section>
    <div>
    </div>
</main>
    <footer>
        <h6>
            Copyright &copy 2018
- Alex Rhino | Rendered by <a href="http://getpelican.com/">Pelican</a> |
            Powered by <a href="http://python.org">Python</a>
        </h6>
    </footer>
</div>
</body>
</html>
